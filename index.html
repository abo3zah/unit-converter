<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit Converter</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="icon" href="icon.ico">
    <script>
        var myObj = { 
          "Length":{
            "meter":[1,0],
            "cm":[100,0],
            "mm":[1000,0],
            "inch":[39.37,0],
            "Kilo Meter":[1/1000,0],
            "foot":[3.281,0],
            "mile":[1/1609,0],
          },
          "Area":{
            "Square Meter":[1,0],
            "Square Mile":[1/2.59e+6,0],
            "Square Kilo":[1/1e6,0],
            "Square Yard":[1.196,0],
            "Square Foot":[10.764,0],
            "Square Inch":[1550,0],
          },
          "Temperature":{
            "Celsius":[1,0],
            "Fahrenheit":[9/5,32],
            "Kelvin":[1,273.15],
          },
          "Energy":{
            "Joule":[1,0],
            "Kilocalorie":[1/4184,0],
            "Kilojoule":[1/1000,0],
            "Gram calorie":[1/4.184,0],
            "Watt hour":[1/3600,0],
            "Kilowatt hour":[1/3.6e+6,0],
            "Electronvolt":[6.242e18,0],
            "foot-pound":[1/1.356,0],
          },
          "Fuel Economy":{
            "Miles per gallon":[1,0],
            "Kilometer per liter":[1/2.352,0],
          }
        };
      
      function populatefunc(label,x){
        document.getElementById(label).innerHTML+='<option value="'+x+'">'+x+'</option>;';
      }
      
      function copyunitfunc(x) {
        document.getElementById("unit_from_type").value = x.innerText;
        changeunitfunc();
      }

      function populatedivfunc(x){
        document.getElementById("result_div").innerHTML +='<div class="w3-row"><p class="w3-col s6 l6 w3-hover-light-gray w3-panel w3-border-0 w3-border-bottom w3-input" id="unit_to" name="unit_to">'+converstionfunc(x).toFixed(5)+'</p><p id="unit_to_type" class="w3-col s6 l6 w3-center" style="cursor: pointer;" onClick="copyunitfunc(this)">'+x+'</p></div>';
      }
      
      function cleardivfunc(){
        document.getElementById("result_div").innerHTML = '<div class="w3-row w3-center w3-gray w3-text-white w3-large" style="text-shadow:1px 1px 0 black">To</div>';
      }
      
      function clearselectfunc(label){
        document.getElementById(label).innerHTML="";
      }
      
      function converstionfunc(x){
        var unit_from, unit_to;
      
        // Get the value of the input field with id="numb"
        unit_from = document.getElementById("unit_from").value;
        unit_to = document.getElementById("unit_to");
        factor_from = document.getElementById("unit_from_type").value;
        factor_to = x;
        measurement_type = document.getElementById("types").value;
      
        return ((unit_from-myObj[measurement_type][factor_from][1])/myObj[measurement_type][factor_from][0])*myObj[measurement_type][factor_to][0]+myObj[measurement_type][factor_to][1];
      }
      
      function changeunitfunc(){
        measurement_type = document.getElementById("types").value;
        cleardivfunc();
      
        for (x in myObj[measurement_type]){
          populatedivfunc(x);
        }
      }
      
      function loadlistfunc(){
        measurement_type = document.getElementById("types").value;
        clearselectfunc("unit_from_type");
        
        for (x in myObj[measurement_type]){
          populatefunc("unit_from_type",x);
        }
      
        changeunitfunc();
      }
      
      function mainfunc() {
        for (x in myObj){
          populatefunc("types",x);
        }
        loadlistfunc();
      }
    </script>
  </head>
  <body onload="mainfunc()">
    <svg width="100%" height="200">
      <defs>
        <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#0F2027" />
          <stop offset="50%" style="stop-color:#203A43" />
          <stop offset="100%" style="stop-color:#2C5364" />
        </linearGradient>
      </defs>
      <rect width="100%" height="100%" style="fill:url(#grad1)" />
      <text x="50%" y="50%" text-anchor="middle" alignment-baseline="middle" font-size="4em" font-family="cursive" fill="white">Unit Converter</text>
    </svg>
    <form class="w3-container w3-mobile w3-padding-16">

      <!--Measurement-->
      <div class="w3-container w3-col">
        <div class="w3-row">
          <select onchange="loadlistfunc()" id="types" name="types" class="w3-round w3-mobile w3-select w3-border">
          </select>
          <br>
          <br>
        </div>
      </div>
      
      <div class="w3-container w3-col m5 l5">
          <div class="w3-row w3-center w3-gray w3-text-white w3-large" style="text-shadow:1px 1px 0 black">
            From
          </div>
          <div class="w3-row">
            <input class="w3-half w3-hover-light-gray w3-panel w3-border-0 w3-border-bottom w3-input" oninput="changeunitfunc()" type="number" id="unit_from" name="unit_from" value="1">
            <select oninput="changeunitfunc()" id="unit_from_type" class="w3-half w3-round w3-select w3-border">
            </select>
          </div>
          
      </div>

      <div class="w3-container w3-center w3-col l2 w3-hide-medium w3-hide-small">
        <svg preserveAspectRatio="xMidYMid meet"  x="0"   y="0"  viewBox="0 0 150 100" width="200" height="100">
          <g>
            <path d="m0 20 h100 v-10 l20 15 l-20 15 v-10 h-100z" stroke="black" stroke-width="1px" fill="white" />
            <path d="m115 50 h-100 v-10 l-20 15 l20 15 v-10 h100z" stroke="black" stroke-width="1px" fill="white" />
          </g>
        </svg>
      </div>

      <div class="w3-container w3-center w3-col m2 w3-hide-large w3-hide-small">
        =
      </div>

      <div class="w3-container w3-center w3-col m2 w3-hide-large w3-hide-medium">
        <br><br>
      </div>

      <div id="result_div" class="w3-container w3-col m5 l5">
      </div>

    </form>

    <footer>
      <h5 class="w3-center">Created with <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="red"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg> by Abdulaziz</h5>
    </footer>
  </body>
</html>
